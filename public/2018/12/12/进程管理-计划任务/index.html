<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>进程管理&amp;计划任务 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.进程管理进程:运行中的程序 * 1.1 查看系统内的进行   #ps 选项    #ps aux    #ps -elf     -a:显示与终端无关的进行     -A:把系统内运行的所有类型的进程都显示出来     -u:把触发进程的用户名显示在前几列     -x -l -f :显示详细信息，一个比一个详细  #ps aux   USER     PID  %CPU %MEM VSZ">
<meta name="keywords" content="linux">
<meta property="og:type" content="article">
<meta property="og:title" content="进程管理&amp;计划任务">
<meta property="og:url" content="http://yoursite.com/2018/12/12/进程管理-计划任务/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.进程管理进程:运行中的程序 * 1.1 查看系统内的进行   #ps 选项    #ps aux    #ps -elf     -a:显示与终端无关的进行     -A:把系统内运行的所有类型的进程都显示出来     -u:把触发进程的用户名显示在前几列     -x -l -f :显示详细信息，一个比一个详细  #ps aux   USER     PID  %CPU %MEM VSZ">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-12-18T08:00:18.629Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进程管理&amp;计划任务">
<meta name="twitter:description" content="1.进程管理进程:运行中的程序 * 1.1 查看系统内的进行   #ps 选项    #ps aux    #ps -elf     -a:显示与终端无关的进行     -A:把系统内运行的所有类型的进程都显示出来     -u:把触发进程的用户名显示在前几列     -x -l -f :显示详细信息，一个比一个详细  #ps aux   USER     PID  %CPU %MEM VSZ">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-进程管理-计划任务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/12/进程管理-计划任务/" class="article-date">
  <time datetime="2018-12-12T08:26:50.000Z" itemprop="datePublished">2018-12-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      进程管理&amp;计划任务
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-进程管理"><a href="#1-进程管理" class="headerlink" title="1.进程管理"></a>1.进程管理</h4><pre><code>进程:运行中的程序
* 1.1 查看系统内的进行
  #ps 选项
   #ps aux
   #ps -elf
    -a:显示与终端无关的进行
    -A:把系统内运行的所有类型的进程都显示出来
    -u:把触发进程的用户名显示在前几列
    -x -l -f :显示详细信息，一个比一个详细
 #ps aux 
 USER     PID  %CPU %MEM VSZ      RSS       TTY                           STAT         START   TIME COMMAND
 root      1   0.0  0.0  2164     648        ?                            Ss           10:25   0:00 init [5] 
      进程编号         虚拟内存KB 物理内存KB  在什么终端运行，?与终端无关 进程当前状态  进程触发时间 进程占用CPU 累计时间       进程名
</code></pre><p>  进程状态 S s T Z D ？补全<br>  R+:刚运行完或是进程组<br>  Sl:l表示进程是以线程方式运行的</p>
<p>  #ps -elf<br>  F    S   UID    PID    PPID    C    PRI     NI     ADDR    SZ    WCHAN    STIME    TTY    TIME      CMD<br>  4    S   root    1       0     0    75       0       -     541     -      10:25     ?   00:00:00    init [5]   </p>
<p>  PRI:系统内核给分配的优先级，无法修改<br>  NI :管理员用户可以修改，修改NI的值改变PRI的值，值的范围-20~19,数越小优先级越高。<br>  PRI=当前修改的NI值＋当前PRI值<br>  ADDR：物理内存<br>  WCHAN：当前内存中的状态“－”表示正在运行</p>
<p>  #pstree  选项     //查看进程数</p>
<p>  #pgrep   进程名   //查看进行PID</p>
<ul>
<li><p>1.2 动态显示进程<br>   #top      //动态显示进程信息，默认5秒刷新一次</p>
<pre><code>-d:指定刷新频率  #top -d 2  //2秒刷新一次
-b:指定执行
-n:执行次数
-p:单独查看指定进程的动态信息  
</code></pre><p>   #top -p 进程PID  //动态查看进行信息<br>   #top -b -n 2 &gt; /tmp/top.txt   //显示2次输出到文件<br>top - 12:20:55 up  1:55(系统运行多长时间),5 user(登录用户数),load average: 0.07, 0.13, 0.05(cpu1,5,15分钟平均数)<br>Tasks: 160 total(当前系统进程数),4 running(运行进程), 155 sleeping(睡觉进程),0 stopped(停止仅此),   1 zombie(僵死进程)<br>Cpu(s): 11.7%us,  7.9%sy,  0.0%ni, 78.0%id,  0.0%wa,  0.3%hi,  2.1%si,  0.0%st<br>Mem:   2065496k total,  1367416k used,   698080k free,    95156k buffers<br>Swap:  4128760k total,        0k used,  4128760k free,   793392k cached</p>
<p>进入top界面，按i查看cpu，按?查看所有top命令<br>P：按CPU使用率排序<br>M:按内存使用率排序<br>?:显示帮助信息<br>1:显示CPU核数<br>k pid:杀死进程<br>r pid -20 — 19:修改指定进程的优先级</p>
<ul>
<li>1.3 终止进程<br>#kill  信号  pid号<br>#kill -l  //查看可以给进程发送的信号<br>ctrl+c :终止进程<br>ctrl+z:暂停进程，把进程置入后并暂停<br>#pkill -9 进程名  //用进程名杀死进程<br>#kill -9 <code>cat /var/run/httpd.pid</code>    //用存放进行PID的文件来杀死进程，<code></code>用来表示执行本身功能<br>#killall -9 vim  //杀死所有vim进程</li>
</ul>
</li>
<li><p>1.4进程存放地址<br> /proc/PID<br> 进程都有一个单独的文件存放进程ID /var/run/httpd.pid<br> /proc/PID/environ //存放进程变量</p>
</li>
<li><p>1.5 进程报警<br> #ps aux | wc -l //查看总进程<br> #nump=<code>ps aux | wc -l</code>  //把总进程数赋值给nump<br> #echo $nump </p>
</li>
<li><p>1.6 激活后台暂停的进程<br> #bg 1 //1表示[1]<br> [root@www 123]# jobs<br> [1]-  Stopped                 find / -perm +7000 &gt;&amp;/dev/null<br> [2]+  Stopped                 find / -perm -7000 &gt;&amp;/dev/null<br> #fg 编号  //把后台进程调入前台<br> #kill -9 %1 //1是编号，杀死进程</p>
<p>补充:</p>
<blockquote>
<pre><code>;  #mkdir /pljtest1;cd /plgtest1   //;代表顺序执行命令
</code></pre><p>&amp;&gt; 把正确的输出信息和错误的输出信息都改变默认的输出位置<br>&amp;  把进程放入后台运行</p>
</blockquote>
<p>#find / -perm +7000 &amp;&gt; /dev/null<br>#jobs //查看当前系统内有没有后台运行的进程<br>[root@www 123]# jobs<br>[1]-  Stopped                 find / -perm +7000 &gt;&amp;/dev/null<br>[2]+  Stopped                 find / -perm -7000 &gt;&amp;/dev/null<br>＋：表示最近一次停止的进程</p>
<ul>
<li><p>1.7 查看某个服务是否开机启动<br> #chkconfig  –list httpd //从查看httpd服务是否是开机启动<br> [root@www 123]# chkconfig –list httpd<br> httpd           0:off   1:off   2:off   3:off   4:off   5:off   6:off<br> linux操作系统共有7个运行级别，编号从0－6<br> 0：关机<br> 1：单用户维护模式 root登录模式<br> 2：没有网络服务的字符模式<br> 3：完全用户字符模式<br> 4：保留<br> 5：图形模式<br> 6：重启系统</p>
<p> #runlevel  //查看当前系统运行级别<br>   [root@www ~]# runlevel</p>
<pre><code>N 5           //N：上一次运行级别，5:当前运行级别
</code></pre><p> #chkconfig –level 5 httpd on  //当运行级别为5的时候开启httpd进程<br> #chkconfig –level 35 httpd on //当运行级别为3，5的时候开启httpd进程<br> #cat /etc/inittab //查看系统默认运行级别，在配置文件/etc/inittab下<br> #ntsync  //查看图形界面启动服务</p>
</li>
<li><p>1.8 重启系统<br>  #reboot<br>  #init 6<br>  #shutdown -r now</p>
<p>忘记密码： e-&gt;菜单-&gt;e 2行 -&gt;io后面加1-&gt;回车-&gt;b         </p>
</li>
</ul>
</li>
<li><p>1.9 查看进程状态<br>#netstat -autnlp httpd<br> -a:all<br> -u:users<br> -t:tcp<br> -n:num<br> -l:listen<br> -p: pid<br> [root@www Desktop]# netstat -autnlp | grep httpd<br> tcp        0      0 :::80         :::*  LISTEN      5579/httpd </p>
</li>
<li>1.10 修改进行PRI的值<br> #nice –20 service httpd start //起动时修改NI的值为-20<br> #renice -15 5616    //把PID为5616的进行NI改为-15<br> newpri = oldpri + nice</li>
</ul>
<h4 id="2-计划任务"><a href="#2-计划任务" class="headerlink" title="2.计划任务"></a>2.计划任务</h4><pre><code>* 2.1一次性计划任务
    #atq //查看是否有一次性计划任务
    #at 时间      //定制一次性计划任务
    时间：
       2.1.1 当前时间 23:00
         #at 23:00
       2.1.2 当前时间推迟
         #at now +3days|hours|minutes 三天之后
       2.1.3 固定日期
         #at 2013-05-12
       [root@www Desktop]# at now +3days
       at&gt; cp /etc/passwd /tmp/pwd.txt
       at&gt; &lt;EOT&gt;
       job 2 at 2013-05-29  15:42    //ctrl+d结束
       [root@www Desktop]# atq
        2       2013-05-29 15:42 a root
       #atq -c 2 //2是编号，查看详细信息
       #atrm 3  //删除计划任务
       #rm -rf /var/spool/at/文件名   //删除计划任务
      2.1.4 没开始执行的计划任务存放路径
        /var/spool/at/文件名

      2.1.5 控制用户能否使用一次性计划任务
           #cat /etc/at.deny   //控制计划任务配置文件
           #echo u6 &gt;&gt; /etc/at.deny  //不让u6使用计划任务
            //写入at.deny中的用户都不可以使用
           //默认只有此文件存在，不让那个普通用户使用就把那个用户名添加
           //到这个文件里，一个用户独占一行                
           #echo u6 &gt; /etc/at.allow //u6可以使用计划任务
           //把用户加入at.allow中就可以使用计划任务，at.allow默认不存在

* 2.2周期性计划任务
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/12/进程管理-计划任务/" data-id="cju0k1qmz001ix5s6qv4125le" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/12/周期性计划任务于网络配置/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          周期性计划任务于网络配置
        
      </div>
    </a>
  
  
    <a href="/2018/12/12/磁盘阵列RAID/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">磁盘阵列RAID</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/go/" style="font-size: 17.5px;">go</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/php/" style="font-size: 12.5px;">php</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/服务器/" style="font-size: 15px;">服务器</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/24/SQLSTATE-HY000-2054-The-server-requested/">SQLSTATE[HY000] [2054] The server requested </a>
          </li>
        
          <li>
            <a href="/2018/12/12/辅助DNS服务器搭建/">辅助DNS服务器搭建</a>
          </li>
        
          <li>
            <a href="/2018/12/12/DNS-Domain-Name-System-域名系统/">DNS (Domain Name System)域名系统</a>
          </li>
        
          <li>
            <a href="/2018/12/12/周期性计划任务于网络配置/">周期性计划任务于网络配置</a>
          </li>
        
          <li>
            <a href="/2018/12/12/进程管理-计划任务/">进程管理&amp;计划任务</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>