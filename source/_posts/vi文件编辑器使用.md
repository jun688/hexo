---
title: vi文件编辑器使用
tags:
  - linux
originContent: ''
categories:
  - linux
toc: true
date: 2018-12-11 18:57:30
---

```language
1.whereis:指定搜索什么样的文件
      #whereis -b ls //搜索ls的二进制文件
      #whereis -s ls //搜索ls的源码包文件
		#whereis -m ls #搜索ls的帮助文件

2.locate 文件名 //搜索数据库文件，数据库文件存放在/var/lib/mlocate/文件夹下
  1)手动更新库文件: # updatedb
 2)自动更新:＃crond （计划任务）

3.makewhatis:手动更新man手册

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
编辑器:joe nano vim vi 

1.vi文件编辑器使用  
 #vi 文件名   //对文本文件进行编辑
   1）如果文件不存在则创建
   2）如果文件存在则打开
   3）文件没有在当前路径下要输入文件的绝对路径

  三种模式:
         1）一般模式：把一个文件用vi打开 #vi test.txt 
                 可做操作：复制，剪贴，删除，光标移动
              11）光标移动：
                      光标在行间跳转：
                           方向键   
          shift+g:文件末行    
          gg:文件首行   
          10gg：光标定位到10行
 
                      光标在行内跳转：
                            方向键   
           end:行尾  
           home:行首
              22）删除：
          dd:      删除光标所在的行
          3dd:     从光标所在行开始删除3行
          d1(数字)G:从光标所在行开始删除到文件行首的所有行
          dG:      从光标所在行开始删除到文件行尾的所有行
          u:       撤销删除
			 ctrl+r:  取消撤销
              33）复制：
          yy:  复制光标所在行
          3yy: 一起复制3行
          y1G: 从光标所在行开始复制到文件行首的所有行
          yG:  从光标所在行开始复制到文件行尾的所有行
          p:   粘贴在光标所在行的下方
          P：  粘贴在光标所在行的上方
              44）剪切：dd+p
                      
        2）输入模式： 对文件内容进行编辑 ， 按i a o I A O s 都可进入输入模式
         i:输入的内容在光标前
         I：光标定位到行首
         a:光标向后移一位
         A:光标移到行尾
         o：当前行的下方新起一行
         O：当前行的上方新起一行
         s:删除光标所在位置字符
       3）末行模式：对文件的内容进行保存，另存为，查找，替换，搜索
           进入末行模式: shift+:  /   ?  
               /  ?  :搜索进入末行
      shift+: ：另存为或保存进入末行
      :w   保存
      :q   退出
      :wq  保存并退出
      :wq! 强制保存并退出
      :q!  不保存退出
      :x  保存并退出
      :X 保存加密码退出
      :set nu 显示行号
      :set nonu 取消行号
      :r 路径/文件名  ： 导入文件内容（默认在光标所在行的下边）
      :2r 路径/文件名  ：导入到第二行的下边
      :w  路径/文件名   ：导出
      :18,25W /tpm/a.txt：把文件18行到25行导出到a.txt下（a.txt文件不存在）
      :set nohlsearch ：去掉高亮搜索
      :set hlsearch   ：显示高亮搜索 
      :set all    ：显示可用的所有选项
      :s/源字符/新字符/[选项]  ：替换
                       [选项] ：g 全局替换,(把所有匹配的都替换)
               i 忽略大小写
        :s/A/w/i #把光标所在行第一个匹配的A替换成w,不区分大小写
        :s/A/w/ig #把把光标所在行A全局替换成w,不区分大小写
        :%s/root/plj/g #把文件中所有root替换成plj
        :3,4s/root/plj/ #把3到4行的root替换成plj
        :%s/#//      #去掉文件中的注释
        :30s/#// #把第30行#替换成空
                   
               搜索
              从文件的上方向下方搜索 /directory #搜索directory
              从文件的下方往上方搜索 ?directory 
     n:把光标定位到下一个匹配的字符上
     N:把光标定位到上一个匹配的字符上
             
              执行命令： :! ls #查看当前目录是否有所保存的文件
                
            注：不能从输入模式到末行模式，从输入模式切换到一般模式，按ESC，然后在进入末行模式
           
         4）扩展命令
       :files ：查看当前打开几个文件      
       :next ：查看下一个打开的文件
       :first ：回到第一个文件
        5）一次打开多个文件： #vimdiff a.txt b.txt
      ctrl+ww ：把光标切换到另一个窗口
      #vimdiff -o a.txt b.txt  #水平分割 

   6）vim区块模式：话块把光标定位到起始位置，按方向键划块
         ctrl+v:一般模式下执行ctrl+v进入区块模式
         d：删除
         p:粘贴
         y:复制
         u:撤销
      7）与vi相关的文件
         #vim /root/.viminfo    #记录vim操作命令
         #> /root/.viminfp #清理vim记录操作
         # vim /root/.vimrc   #vim的配置文件，放在家目录下，
            #默认不存在，先进行创建,一个功能占用一行
            :set backup #自动生成备份文件
            ###################################################
          #.vimrc文件内容
          :set nu
          :set backup
             ###################################################

          文件的缓存文件:  .bak.txt.swp
                  
2.查看二进制文件:＃od 文件名

3. 重定向 ：
        ‘>’:覆盖重定向
        ‘>>’:追加重定向
    #head -20 /etc/passwd > ./test.txt  //把前20行输出到当前路径下的test.txt
    #cat -b test.txt  //加行号查看

4.#which vim  #查看软件是由那个文件提供 
  #rpm -qf /usr/bin/vim  #查看软件由那个软件包提供
```
